# タロット占いアプリ・課金プラン設計

## 即答・AI 対話のフロー

### 即答形式

#### 実行フロー

1. ユーザーが占いカテゴリを選択
2. ユーザーがスプレッドを選択、占いボタンを押下
3. システムがスプレッドに従ってカードをランダムに選択
4. システムが選択された占いカテゴリとランダムに選択されたカード（複数）を利用してプロンプトを生成
5. 生成されたプロンプトに従って占い結果を提示

#### プロンプト例

事前にカードはシステムが選択する。
その際に、

- 何枚目か
- カード位置の意味
- カード名
- 正・逆
- カード意味一覧
  の情報は DB などから取得しておく

```
あなたは熟練のタロット占い師です。
{スプレッド名}に従って以下のカードを使って{占いカテゴリ名}について占ってください。

n枚目:{位置の意味}:愚者:正:{カード意味一覧}
n+1枚目:{位置の意味}:世界:逆:{カード意味一覧}
...指定枚数繰り返し...

# 出力
---
n枚目のカードの解釈
...指定枚数繰り返し...
---
総合占い結果
---
```

### AI 対話形式

#### 実行フロー

1. ユーザーが占いたい内容を入力
2. ユーザーがスプレッドを手動選択するか、AI に占い内容によっておすすめを選択させる（つまり生成 AI が利用されるケースあり）
3. 全カードをシステムが選択する
4. AI が全カードの解釈を提示する。
5. 重要な３カードについてシステムがユーザーに質問をする（正確には、「それぞれのカードについて思い当たることを記載してください」）
6. ユーザーが３つの質問に対して回答を入力（３つの入力欄にカードの位置番号つきで入力してもらう）
7. AI が回答を受けて、最終的な占い結果を提示する

注：3 枚以上のスプレッドしか選択できないようにすること。

#### プロンプト例

1. おすすめスプレッドを生成させる場合

事前に DB により、スプレッド一覧を用意しておく。

形式＝ DB の ID ＋スプレッド名＋カテゴリー配列

（3 枚以上のスプレッドのみで構成すること）

```
あなたは熟練のタロット占い師です。
ユーザーの入力した{占いたい内容}という入力に対して、適切なスプレッドを選択してください。

全スプレッドの配列

出力結果
{DBのID}
```

2. 全カードの解釈と重要なカードについてユーザーに質問する場合

事前にカードはシステムが選択する。
その際に、

- 何枚目か
- カード位置の意味
- カード名
- 正・逆
- カード意味一覧
  の情報は DB などから取得しておく

```
あなたは熟練のタロット占い師です。
{スプレッド名}に従って以下のカードを使って{占いたい内容}についてまず全カードの解釈を提示してください。
また、最終的な占い結果を提示するのに当たり、重要なカードを3枚選択してください。
この後ユーザーにその3枚のカードについて思い当たることを入力してもらいます。

n枚目:{位置の意味}:愚者:正:{カード意味一覧}
n+1枚目:{位置の意味}:世界:逆:{カード意味一覧}
...指定枚数繰り返し...

# 出力
---
n枚目のカードの解釈
...指定枚数繰り返し...
---
{カード名}
{カード名}
{カード名}
---
```

3. ユーザーの回答を受けてカード解釈を完成させ、最終的な占い結果を提示する場合

```
あなたは熟練のタロット占い師です。
前回のカード解釈と以下のユーザー入力に従って総合的な占い結果を提示してください。

---
スプレッド名
---
n枚目のカードの解釈
...指定枚数繰り返し...
---
{ユーザーの入力}
{ユーザーの入力}
{ユーザーの入力}
---

# 出力
---
n枚目のカードの解釈（再解釈結果）
...指定枚数繰り返し...
---
総合占い結果
---
```

## プラン設計

### プラン名について

プラン名については以下とする。以前はコーチングプランを用意していたが、
タロットコーチングとは本来の意味では異なるのでプレミアムと名称変更する。

- フリー（ユーザー未登録）
- フリー（ユーザー登録済）
- スタンダード
- プレミアム

### 各プランの内容について

| プラン         | 即答制限  | AI 対話制限   | 料金 | 広告有無 | 利用可能スプレッド   | 備考                                               |
| -------------- | --------- | ------------- | ---- | -------- | -------------------- | -------------------------------------------------- |
| フリー・未登録 | 1 日 1 回 | なし          | 0    | 有り     | 初級３種類(One/3 枚) |                                                    |
| フリー・登録済 | 1 日 3 回 | なし          | 0    | 有り     | 初級３種類(One/3 枚) |                                                    |
| スタンダード   | 1 日 5 回 | なし          | 980  | 無し     | 上級以下全種         | ケルト十字など有名スプレッドも入り即答だけど本格的 |
| プレミアム     | 1 日 5 回 | **1 日 1 回** | 1980 | 無し     | 上級以下全種         | AI 対話による差別化                                |

### コーチングプランについて

別途コーチングプランも考えたいが、モバイルアプリを想定した場合、
対話その他、妥当かどうか判断が難しいため TBD とする。
（ユーザー入力がしにくいため）
例えば、デスクトップアプリや PC での Web 利用を想定した別バージョンを用意する手もあるかと考える。
検討している内容としては、より本格的な AI 対話を考慮して以下を想定している。

1. ユーザーが占いたい内容を入力
2. ユーザーがスプレッドを手動選択するか、AI に占い内容によっておすすめを選択させる（つまり生成 AI が利用されるケースあり）
3. 全カードをシステムが選択する
4. AI が全カードの解釈を提示する
5. 全部のカードについて、ユーザーにそのカードについて思うことを入力してもらう。
6. ユーザーの入力を受けて、全てのカードの再解釈を提示し、総合占い結果も併せて提示する。
7. ユーザーに 3 回まで質問を受け付ける。
8. それぞれの質問について総合占い結果を加味して回答する。

## ユーザーへのアピール

- 使用スプレッドランキングを表示する機能
- 占い日記機能
- SNS への占い結果投稿用画像生成機能
